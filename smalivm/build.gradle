dependencies {
    // Object cloning
    compile 'uk.com.robust-it:cloning:1.9.2'

    // Easy method reflection
    compile 'commons-beanutils:commons-beanutils:1.9.2'

    // Lazy
    compile depends.commons_io
    compile depends.commons_lang

    // Primitive collections
    compile depends.trove4j

    // Perfromance benchmarking
    compile depends.perfidix

    // Logging facade
    compile depends.slf4j_api

    // Parsing and writing dex files
    compile 'org.smali:dexlib2:2.0.6'
    compile 'org.smali:smali:2.0.6'
    compile 'org.smali:baksmali:2.0.6'

    // Contains Android framework classes that should be reflected instead of virtually executed
    compile files('libs/android-local.jar')

    testCompile depends.junit
    testCompile depends.mockito
}

// Build a separate jar that contains all dependencies
task fatJar(type: Jar) {
    from sourceSets.main.output
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}
tasks.getByPath('build').dependsOn(fatJar)

task myTestsJar(type: Jar) {
    // Simplify uses some classes from smalivm's tests.
    classifier = 'tests'
    from sourceSets.test.output
}

configurations {
  testArtifacts
}

artifacts {
   testArtifacts myTestsJar
}
